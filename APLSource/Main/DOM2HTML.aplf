 DOM2HTML←{
     ⍝ ⍵ ←→ DOM
     ⍝ ← ←→ HTML
     nl←⎕UCS 13
     0<⍴⍴⍵:1↓⊃,/nl,¨∇¨⍵
     _←InjectStyleElement ⍵
     _←InjectScriptElement ⍵
     m←AddXMLSpace↑,ConstructQXI ⍵
     m[;2]←('\&(.+;)'⎕R((⎕UCS 27),'\1'))m[;2]   ⍝ Esacpe EntityName start
     t←RemoveXMLSpace(⎕XML⍠('UnknownEntity' 'Preserve'))4↑[1]m
     t←t InjectHTML m[;4]~0
     ⍵.Tag≢'html':t
     t←⍵ InjectStyle t
     t←⍵ InjectScript t
     '<!DOCTYPE html>',nl,t
 }
