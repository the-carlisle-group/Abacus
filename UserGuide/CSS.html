<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><link href="/Abacus/exigo.css" rel="stylesheet"></link></head><body><header><a href="/Abacus/"><img height="80px" src="/Abacus/Images/AbacusLight.svg" width="auto"></img></a><nav><a href="/Abacus/UserGuide">User Guide</a><a href="/Abacus/ObjectReference">Object Reference</a><a href="/Abacus/FunctionReference">Function Reference</a></nav></header><main><p>The following code assumes the Abacus API is instantiated as <code>A</code>, that is:</p><pre><code>~~~apl      A←#.Abacus.Main </code></pre><p>The <code>NewRule</code> function creates a new CSS rule for a selector:</p><pre><code>~~~apl     r1←A.NewRule 'h1'     r2←A.NewRule 'h2,h3'</code></pre><p>Declarations are made by simply assigning values to properties:</p><pre><code>~~~apl      r1.border←0      r1.padding_top←'2rem'      r2.font_size←'1.5rem'~~~ </code></pre><p>Properties with dashes, illegal in APL names, should be specified with underscores. Values may be numeric or text vector.</p><p>Rules are composed using the <code>ComposeRules</code> function:</p><pre><code>~~~apl      A.ComposeRules r1 r2h1 {                                                                                border: 0;                                                                      padding-top: 2rem;                                                          }                                                                               h2,h3 {                                                                             font-size: 1.5rem;                                                          }                    </code></pre><p>The result of <code>ComposeRules</code> is ready to be written to file or embedded in an HTML page.</p><p>Rules may be nested by providing the parent rule as a left argument to <code>NewRule</code>:</p><pre><code>~~~apl      pr←A.NewRule '@media print'      r←pr A.NewRule 'p'       r.font+size←'10px'      A.ComposeRules pr @media print {                                                p {                                                           font-size: 10px;                                      }                                                     } ~~~ </code></pre><p>Child rules may also be directly assigned:</p><pre><code>~~~apl      pr←A.NewRule '@media screen'      pr.Rules←r1 r2 r3      A.ComposeRules pr @media screen {                                         h1 {                          border: 0;                padding-top: 2rem;    }                                                   h2,h3 {                       font-size: 1.5rem;    }                                                   p {                           border: 0;            }                     }            </code></pre><p>A parent rule with an empty selector, may be used as a collection of rules, convenient for constructing a set of rules: </p><pre><code>~~~aplCreateStyleSheet←{     s←A.NewRule ''     r←s A.NewRule 'p'      r.padding←'1em 2em'      r←s A.NewRule 'code'     r.font_family←'APL385 Unicode'     r.background_color←⍵.CodeBackgroundColor     s}</code></pre><p>Often the right argument to a function like this will be a namespace containing, say, a theme, which is then used to specify many of the property values in the style sheet.</p><p>A style sheet may be embedded in an HTLM document by specifying a <code>Style</code> property in the <code>html</code> element of the DOM. The Style property may  be specified as a string (usually the result of <code>ComposeRules</code>) or an array of rule objects. The DOM2HTML function will compose the array of styles and create a style element under the head element when composing the HTML:</p><pre><code>~~~apl     r1←A.NewRule 'p'     r1.Border←0     r2←A.NewRule 'Body'     r2.padding←0     d←A.New 'html'     h←d A.New 'head'     b←d A.New 'body'     p←b A.New 'p' 'Hello world!'     d.Style←r1 r2      A.DOM2HTML d&lt;!DOCTYPE html&gt;        &lt;html&gt;                   &lt;head&gt;                   &lt;style&gt;                  p {                              border: 0;               }                            body {                           padding: 0;              }                          &lt;/style&gt;  &lt;/head&gt;      &lt;body&gt;                   &lt;p&gt;Hello world!&lt;/p&gt;  &lt;/body&gt;              &lt;/html&gt; </code></pre></main><footer></footer></body></html>
