<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><link href="/Abacus/exigo.css" rel="stylesheet"></link></head><body><header><a href="/Abacus/"><img height="80px" src="/Abacus/Images/AbacusLight.svg" width="auto"></img></a><nav><a href="/Abacus/UserGuide">User Guide</a><a href="/Abacus/ObjectReference">Object Reference</a><a href="/Abacus/FunctionReference">Function Reference</a></nav></header><main><h1>A Simple Application</h1><p>Let's jump right in and create a very simple desktop application that keeps track of the number of times a button is clicked. All of the concepts will be exlained in further detail in subsequent chapters.</p><p>You can create a new namepace for the application, or just play around in the root namespace. Whatever your location remember to execute <code>A←#.Abacus.Main</code> So the Abacus functions can be located.</p><p>First we write a little function to build our document, which contains nothing but a button and a paragraph element:</p><pre><code>BuildClickCounter←{       bn←A.New 'button' 'Click Me'       bn.Onclick←A.FQP 'OnIncrement'       bn._Count←0       p←A.New 'p' 'Clicked 0 times'       p.id←'click-status'       A.NewDocument bn,p }</code></pre><p>Note that we have assigned a callback function (also known as an event handler) to the <code>onclick</code> event. Note also that we have made up a variable and stored it in the button itself to track how many times it has been clicked. Both the name and location of this variable are arbitrary.</p><p>Now we will need to implement the <code>OnIncrement</code> function:</p><pre><code>OnIncrement←{       ⍝ ⍵ Event Message       d←⍵.Document       b←⍵.Target       b._Count+←1       p←d A.GetElementById 'click-status'        p A.SetInnerHTML ⍕'Clicked' b._Count 'times'}</code></pre><p>Abacus provides callback functions a namespace with all of the information needed to handle the event. The function implements the counter and updates the document. </p><p>Finally we need to create an Application object to run the app:</p><pre><code>      a←A.NewApplication ''       a.BuildFunction←A.FQP 'BuildClickCounter'      d←a A.StartDesktopApplication ''</code></pre><p>The final result <code>d</code> is the <a href="/Abacus/ObjectReference/HTMLDocument">HTMLDocument</a> object created by our build function. And on screen will be the assocated HTMLRenderer form with our application, ready for use. </p><p>Try it out!</p><p>Here is all the above code in one contiguous block. Simply copy this code into your APL session (version 20 or better!) and hit the enter key:</p><pre><code>A←#.Abacus.MainBuildClickCounter←{      bn←A.New 'button' 'Click Me'      bn.Onclick←A.FQP 'OnIncrement'      bn._Count←0      p←A.New 'p' 'Clicked 0 times'      p.id←'click-status'      A.NewDocument bn,p }OnIncrement←{      d←⍵.Document      b←⍵.Target      b._Count+←1      p←d A.GetElementById 'click-status'       p A.SetInnerHTML ⍕'Clicked' b._Count 'times'}      a←A.NewApplication ''       a.BuildFunction←A.FQP 'BuildClickCounter'      d←a A.StartDesktopApplication ''</code></pre></main><footer></footer></body></html>
